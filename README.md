# aws-challenge-2
## aws-challengeとは
「aws-challenge」とは、 **AWS CloudFormation** や **Serverless Framework** を用いて構築されたAWS環境の不具合を見つけ解決しながらAWSに慣れ親しんでもらうことを目的とした学習課題です。

## イントロ 
大変だ！

サイトが落ちてしまったようだ。

なんてこった、早く修復しないと100兆円規模の損害が発生してしまう。

メンテナンス画面（503 Service Unavailable）では、黒猫が狂ったようにキーボードをたたきまくっているではないか。

早くEC2を修復しなければ！

・・・

・・・

・・・

あー、あー、あー、なんてことでしょう！

ssh接続できない。。。

どうする。どうすればいい。

というわけで、

今回の課題は、「SSH接続できないEC2の謎を解き明かせ」

挑戦者求！

## 今回作成される環境


* Amazon VPC
* Application Load Balancer
* Amazon EC2

### 確認事項
* EC2を作成しているため、AWS CloudFormationでcompleteになっても1分ほど環境が整わない時間がありますので、ゆっくりと挑戦してみてください。
* この問題ではEC2にSSH接続する必要があります。したがって事前にキーペアを作成しておく必要があります。
* **ロールの変更は無しです！**
* 今回、楽しくなって色々不具合を仕込んじゃいました。(・ω<) ﾃﾍﾍﾟﾛ

## 環境
環境構築に **AWS CloudFormation** を利用します。

## 環境構築方法
AWS CloudFormationでスタック作成をします。

テンプレートのファイルのアップロードからaws-challenge2.yamlをアップロードします。



スタックの名前と必要に応じてパラメータを調整してください。



### パラメータ

| パラメータ | デフォルト値 |説明|
----|----|---- 
| EC2InstanceAMI | ami-0c3fd0f5d33134a76 |デフォルトは Amazon Linux2のamiです。
| Stage | dev |アカウントで複数立ち上げる場合には、ユニークになるようにしてください
| VPCCIDR | 22.0.0.0 | アカウントで複数立ち上げる場合には、かぶらないようにしてください。
| Keypiar |  | EC2に設置するキーペア

そのあとの画面は、何も設定しなくていいです。



最後にIAMロールを作成するため、チェックボックスにチェックをして、スタックの作成をしてください。


## 課題確認方法

AWS CloudFormationでデプロイが完了すると出力タブにURLが払い出されます。
まずは、このURLを確認してください。



すると、なんということでしょう！

503 service unavailableページが表示されます。

ここからが課題のスタートです。

> 払い出されたURLにアクセスしても503ページが表示されない場合は、しばらく待ってから再度アクセスしてみてください。

まずは構築された環境の不具合を修正することによりEC2にSSHログインすることができるようになります。

続いてEC2にログインして、指示に従い不具合を修正してください。

環境の不具合についてはaws-challenge2.yamlを修正してもいいですし、AWSコンソールに入って調べてもかまいません。

解き方は自由です。

それでは、Let's enjoy!

## 注意事項

課題によっては、そのまま放置するとお金のかかるものもあります。きちんと環境は撤去するようにしてください。
